# Emby 增强元数据配置示例
# 复制此文件为 .env 或直接在 docker-compose.yml 中配置

# ===========================================
# Emby 服务器配置
# ===========================================

# Emby 服务器地址（必需）
# 格式: http://IP:端口 或 https://域名
EMBY_SERVER_URL=http://192.168.1.100:8096

# Emby API 密钥（必需）
# 在 Emby 管理界面 → 高级 → API 密钥 中生成
EMBY_API_KEY=your_emby_api_key_here

# ===========================================
# 功能说明
# ===========================================

# 启用增强元数据功能后，系统将：
# 1. 自动从 Emby 服务器获取完整的元数据ID
# 2. 按优先级使用元数据ID进行弹幕匹配：
#    - TMDB ID (最高优先级)
#    - 豆瓣 ID
#    - IMDb ID  
#    - TVDB ID
#    - Bangumi ID (最低优先级)
# 3. 如果元数据ID匹配失败，自动回退到标题匹配
# 4. 具有完善的错误处理，不会影响基本功能

# ===========================================
# 网络要求
# ===========================================

# 确保 danmu-api 容器能够访问 Emby 服务器
# 如果 Emby 在同一台机器上，使用宿主机IP而不是localhost
# 如果使用 Docker 网络，确保容器在同一网络中

# ===========================================
# 安全建议
# ===========================================

# 1. 为 danmu-api 创建专用的 Emby 用户
# 2. 该用户只需要"媒体库"读取权限
# 3. 定期轮换 API 密钥
# 4. 使用 HTTPS 连接（如果可能）

# ===========================================
# 故障排除
# ===========================================

# 如果增强功能不工作：
# 1. 检查 Emby 服务器是否可访问
# 2. 验证 API 密钥是否正确
# 3. 查看容器日志中的错误信息
# 4. 系统会自动回退到基本功能，不影响正常使用

# 日志示例：
# [INFO] 元数据增强器已启用 - Emby服务器: http://192.168.1.100:8096
# [INFO] 成功获取媒体项 12345 的增强元数据
# [INFO] 通过 TMDB ID 找到动漫: '某科学的超电磁炮T' (ID: 199)
# [INFO] 通过 TMDB ID 匹配成功，找到弹幕
